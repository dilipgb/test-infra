---
apiVersion: external-secrets.io/v1alpha1
kind: ClusterSecretStore
metadata:
  name: s390x-cluster
  namespace: test-pods
spec:
  provider:
    ibm:
      serviceUrl: "https://3df3fcd9-5e04-4298-af89-d4d528c74a79.ca-tor.secrets-manager.appdomain.cloud"
      auth:
        secretRef:
          secretApiKeySecretRef:
            namespace: test-pods
            name: ibm-secret
            key: apiKey
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: s390x-cluster
  namespace: test-pods
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: s390x-cluster
  target:
    name: s390x-cluster
    creationPolicy: Owner
  data:
  - secretKey: config
    remoteRef:
      key: knative-ci/arbitrary/kubeconfig
  - secretKey: ko-docker-repo
    remoteRef:
      key: knative-ci/arbitrary/ko-docker-repository
  - secretKey: registry.crt
    remoteRef:
      key: knative-ci/arbitrary/registry-certificate
  - secretKey: config.json
    remoteRef:
      key: knative-ci/arbitrary/docker-config
  - secretKey: knative01.pem
    remoteRef:
      key: knative-ci/arbitrary/knative01-ssh
  - secretKey: server-list
    remoteRef:
      key: knative-ci/arbitrary/server-list
  - secretKey: ci-script
    remoteRef:
      key: knative-ci/arbitrary/ci-script
